<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>eMagicEyes — Foresight Loop</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
/* ── Reset & base ── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --teal:  #33CCCC;
  --mid:   #6666CC;
  --deep:  #663399;
  --bg:    #f4f5f9;
  --card:  #ffffff;
  --text:  #12112a;
  --muted: #6b6b8a;
}
html { scroll-behavior: smooth; }
body {
  font-family: 'Poppins', sans-serif;
  background: var(--bg);
  background-image: radial-gradient(rgba(102,102,204,.06) 1px, transparent 1px);
  background-size: 24px 24px;
  color: var(--text);
}

/* ── Page header ── */
.page-header {
  max-width: 1100px;
  margin: 0 auto;
  padding: 72px 40px 48px;
}
.page-header .eyebrow {
  font-size: 11px; font-weight: 700; letter-spacing: .2em;
  text-transform: uppercase; color: var(--teal); margin-bottom: 12px;
}
.page-header h1 {
  font-size: clamp(28px, 4vw, 48px); font-weight: 700;
  line-height: 1.15; color: var(--text); margin-bottom: 16px;
}
.page-header h1 span {
  background: linear-gradient(90deg, var(--teal), var(--mid));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
}
.page-header p {
  font-size: 16px; color: var(--muted); max-width: 520px; line-height: 1.65;
}

/* ── Scroll layout ── */
.scroll-section {
  max-width: 1100px;
  margin: 0 auto;
  padding: 0 40px 120px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 60px;
  align-items: start;
}

/* ── Left: steps list ── */
.steps {
  padding-top: 20px;
}
.step {
  padding: 48px 0;
  border-top: 1px solid rgba(102,102,204,.12);
  cursor: pointer;
  transition: opacity .3s;
}
.step:last-child { border-bottom: 1px solid rgba(102,102,204,.12); }
.step .num {
  font-size: 11px; font-weight: 700; letter-spacing: .15em;
  color: var(--teal); margin-bottom: 10px; opacity: .7;
  transition: opacity .3s;
}
.step h2 {
  font-size: 28px; font-weight: 700; color: var(--text);
  margin-bottom: 12px; transition: color .3s;
}
.step p {
  font-size: 15px; color: var(--muted); line-height: 1.7; max-width: 380px;
}
.step .badge {
  display: inline-flex; align-items: center; gap: 6px;
  margin-top: 16px; padding: 5px 12px;
  background: rgba(0,184,148,.1); border: 1px solid rgba(0,184,148,.3);
  border-radius: 100px; font-size: 11px; font-weight: 600; color: #00b894;
  opacity: 0; transform: translateX(-8px);
  transition: opacity .4s, transform .4s;
}
.step.active .num { opacity: 1; }
.step.active h2 { color: var(--teal); }
.step.active .badge { opacity: 1; transform: translateX(0); }

/* ── Right: sticky visual ── */
.sticky-panel {
  position: sticky;
  top: 60px;
  height: calc(100vh - 120px);
  max-height: 560px;
  display: flex;
  flex-direction: column;
  gap: 0;
}
.visual-card {
  background: #12112a;
  border-radius: 20px;
  overflow: hidden;
  box-shadow: 0 2px 0 rgba(102,102,204,.08),
              0 12px 40px rgba(102,102,204,.18),
              0 32px 80px rgba(102,51,153,.12);
  border: 1px solid rgba(255,255,255,.07);
  flex: 1;
  position: relative;
}

/* individual scene panels */
.vscene {
  position: absolute; inset: 0;
  opacity: 0;
  transition: opacity .55s cubic-bezier(.4,0,.2,1);
  pointer-events: none;
}
.vscene.show { opacity: 1; pointer-events: auto; }
.vscene svg { width: 100%; height: 100%; display: block; }

/* ── Progress bar ── */
.progress-bar {
  display: flex; gap: 6px; padding: 14px 20px 0;
}
.prog-pip {
  flex: 1; height: 3px; border-radius: 2px;
  background: rgba(102,102,204,.15);
  transition: background .4s;
}
.prog-pip.done   { background: var(--teal); }
.prog-pip.active {
  background: var(--mid);
  position: relative; overflow: hidden;
}
.prog-pip.active::after {
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.5), transparent);
  animation: shimmer 1.5s infinite;
}
@keyframes shimmer { 0%{transform:translateX(-100%)} 100%{transform:translateX(100%)} }

/* ── Step indicator label ── */
.stage-label {
  padding: 10px 20px 0;
  display: flex; align-items: center; gap: 10px;
}
.stage-icon {
  width: 32px; height: 32px; border-radius: 10px;
  background: linear-gradient(135deg, var(--mid), var(--deep));
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0;
}
.stage-name { font-size: 12px; font-weight: 700; color: #fff; }
.stage-sub  { font-size: 10px; color: rgba(255,255,255,.45); margin-top: 1px; }
.val-badge {
  margin-left: auto;
  display: none; align-items: center; gap: 5px;
  padding: 3px 10px; border-radius: 100px;
  background: rgba(0,184,148,.15); border: 1px solid rgba(0,184,148,.4);
  font-size: 10px; font-weight: 600; color: #00b894;
}
.val-badge.show { display: flex; }

/* ── Keyframes from original ── */
@keyframes blink { 0%,100%{opacity:1}
@keyframes fadeInUp  { from{opacity:0;transform:translateY(10px)}
@keyframes scanDown  { 0%{transform:translateY(-100%)}
@keyframes float     { 0%,100%{transform:translateY(0)}
@keyframes spin      { to { transform: rotate(360deg); }
@keyframes bboxBlink { 0%,100%{opacity:.4}
@keyframes drawLine  { from{stroke-dashoffset:300}
@keyframes popIn     { from{opacity:0;transform:scale(.7)}
@keyframes rise      { from{opacity:0;transform:translateY(20px)}
@keyframes countUp   { from{opacity:0}
/* SCENE 1: CONNECT — camera grid + signal lines */
.s1-cam { animation: popIn .5s ease forwards; }
.s1-cam:nth-child(2){animation-delay:.1s}
.s1-cam:nth-child(3){animation-delay:.2s}
.s1-cam:nth-child(4){animation-delay:.3s}
.s1-line { stroke-dasharray: 8 4; animation: dash-flow 1.5s linear infinite; }
.s1-signal { animation: glow-pulse 1.4s ease-in-out infinite; }
.s1-signal:nth-child(2){animation-delay:.4s}
.s1-signal:nth-child(3){animation-delay:.8s}

/* SCENE 2: ANALYZE — grid cells lighting up */
.s2-cell { opacity: 0; animation: popIn .3s ease forwards; }
.s2-scan { animation: scanDown 2.2s linear infinite; }

/* SCENE 3: DETECT — warehouse + bboxes */
.s3-bbox  { stroke-dasharray:4 2; animation: bboxBlink 1.8s ease-in-out infinite; }
.s3-bbox2 { stroke-dasharray:4 2; animation: bboxBlink 1.8s ease-in-out infinite .6s; }
.s3-badge { animation: float 2.5s ease-in-out infinite; }

/* SCENE 4: VALIDATE — person + check flow */
.s4-check { animation: popIn .4s ease forwards; }
.s4-check:nth-child(2){animation-delay:.3s}
.s4-check:nth-child(3){animation-delay:.6s}
.s4-line  { stroke-dasharray:200; stroke-dashoffset:200; animation: drawLine 1.2s ease forwards; }

/* SCENE 5: OPTIMIZE — chart line drawing */
.s5-line  { stroke-dasharray:300; stroke-dashoffset:300; animation: drawLine 1.8s ease forwards .2s; }
.s5-dot   { opacity:0; animation: popIn .3s ease forwards; }
.s5-dot:nth-child(1){animation-delay:.3s}
.s5-dot:nth-child(2){animation-delay:.7s}
.s5-dot:nth-child(3){animation-delay:1.1s}
.s5-dot:nth-child(4){animation-delay:1.5s}
.s5-label { opacity:0; animation: rise .4s ease forwards 1.6s; }

/* ── Responsive ── */
@media (max-width: 768px) {
  .scroll-section { grid-template-columns: 1fr; gap: 0; padding-bottom: 60px; }
  .sticky-panel { position: relative; top: 0; height: 320px; max-height: 320px; margin-bottom: 40px; }
  .page-header { padding: 40px 20px 32px; }
  .scroll-section { padding: 0 20px 60px; }
}
</style>
</head>
<body>

<header class="page-header">
  <div class="eyebrow">How it works</div>
  <h1>The <span>Foresight Loop</span></h1>
  <p>Transform real-world activity into real-time digital intelligence — monitor, analyze, alert, and act to reduce risk and improve operations.</p>
</header>

<section class="scroll-section">

  <!-- LEFT: step list -->
  <div class="steps" id="steps">

    <div class="step" data-step="0">
      <div class="num">/01</div>
      <h2>Connect</h2>
      <p>Seamless plug-and-play integration with your existing cameras, sensors and edge devices — no rip-and-replace required.</p>
    </div>

    <div class="step" data-step="1">
      <div class="num">/02</div>
      <h2>Analyze</h2>
      <p>AI models process every video feed simultaneously, extracting movement data, zone activity and throughput metrics in real time.</p>
    </div>

    <div class="step" data-step="2">
      <div class="num">/03</div>
      <h2>Detect</h2>
      <p>Identifies PPE violations, proximity conflicts, restricted zone entries and operational bottlenecks before they become incidents.</p>
    </div>

    <div class="step" data-step="3">
      <div class="num">/04</div>
      <h2>Validate</h2>
      <p>Human-in-the-loop review ensures every alert is meaningful — eliminating noise and building operator trust over time.</p>
      <div class="badge">✓ Human-in-the-loop</div>
    </div>

    <div class="step" data-step="4">
      <div class="num">/05</div>
      <h2>Optimize</h2>
      <p>Every detection cycle feeds back into the model, continuously improving accuracy and pushing safety performance higher.</p>
    </div>

  </div>

  <!-- RIGHT: sticky visual -->
  <div class="sticky-panel" id="stickyPanel">

    <!-- progress pips -->
    <div class="progress-bar">
      <div class="prog-pip" id="pp0"></div>
      <div class="prog-pip" id="pp1"></div>
      <div class="prog-pip" id="pp2"></div>
      <div class="prog-pip" id="pp3"></div>
      <div class="prog-pip" id="pp4"></div>
    </div>

    <!-- stage label row -->
    <div class="stage-label">
      <div class="stage-icon">
        <svg id="sIcon" viewBox="0 0 24 24" width="18" height="18" fill="none"></svg>
      </div>
      <div>
        <div class="stage-name" id="sName">Connect</div>
        <div class="stage-sub"  id="sSub">Integrates with existing cameras &amp; edge devices</div>
      </div>
      <div class="val-badge" id="vBadge">✓ Validated</div>
    </div>

    <!-- visual card with scenes -->
    <div class="visual-card">
      <div class="vscene" id="vs0"><svg viewBox="0 0 532 230" fill="none" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="c1bg" x1="0" y1="0" x2="532" y2="230" gradientUnits="userSpaceOnUse">
            <stop stop-color="#0d0b22"/>
            <stop offset="1" stop-color="#1a1040"/>
          </linearGradient>
          <linearGradient id="c1hub" x1="0" y1="0" x2="1" y2="1">
            <stop stop-color="#33CCCC"/>
            <stop offset="1" stop-color="#6666CC"/>
          </linearGradient>
          <filter id="glow"><feGaussianBlur stdDeviation="3" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
        </defs>
        <rect width="532" height="230" fill="url(#c1bg)"/>

        <!-- subtle grid -->
        <pattern id="g1" width="32" height="32" patternUnits="userSpaceOnUse">
          <path d="M32 0H0V32" stroke="rgba(102,102,204,.07)" stroke-width="1"/>
        </pattern>
        <rect width="532" height="230" fill="url(#g1)"/>

        <!-- Central hub -->
        <circle cx="266" cy="115" r="30" fill="rgba(51,204,204,.1)" stroke="#33CCCC" stroke-width="1.5" filter="url(#glow)"/>
        <circle cx="266" cy="115" r="20" fill="url(#c1hub)" opacity=".9"/>


        <!-- Camera nodes — 4 corners + top/bottom -->
        <!-- TL -->
        <g class="s1-cam" style="transform-origin:80px 55px">
          <rect x="60" y="40" width="40" height="28" rx="6" fill="#1e1a3f" stroke="#33CCCC" stroke-width="1.2"/>
          <rect x="66" y="46" width="20" height="14" rx="2" fill="rgba(51,204,204,.15)"/>
          <circle cx="88" cy="53" r="5" fill="none" stroke="#33CCCC" stroke-width="1.2"/>
          <circle cx="88" cy="53" r="2" fill="#33CCCC"/>
          <rect x="97" y="51" width="6" height="4" rx="1" fill="#33CCCC" opacity=".7"/>
        </g>
        <!-- TR -->
        <g class="s1-cam" style="transform-origin:452px 55px">
          <rect x="432" y="40" width="40" height="28" rx="6" fill="#1e1a3f" stroke="#6666CC" stroke-width="1.2"/>
          <rect x="438" y="46" width="20" height="14" rx="2" fill="rgba(102,102,204,.15)"/>
          <circle cx="460" cy="53" r="5" fill="none" stroke="#6666CC" stroke-width="1.2"/>
          <circle cx="460" cy="53" r="2" fill="#6666CC"/>
          <rect x="469" y="51" width="6" height="4" rx="1" fill="#6666CC" opacity=".7"/>
        </g>
        <!-- BL -->
        <g class="s1-cam" style="transform-origin:80px 175px">
          <rect x="60" y="162" width="40" height="28" rx="6" fill="#1e1a3f" stroke="#663399" stroke-width="1.2"/>
          <rect x="66" y="168" width="20" height="14" rx="2" fill="rgba(102,51,153,.15)"/>
          <circle cx="88" cy="175" r="5" fill="none" stroke="#663399" stroke-width="1.2"/>
          <circle cx="88" cy="175" r="2" fill="#663399"/>
          <rect x="97" y="173" width="6" height="4" rx="1" fill="#663399" opacity=".7"/>
        </g>
        <!-- BR -->
        <g class="s1-cam" style="transform-origin:452px 175px">
          <rect x="432" y="162" width="40" height="28" rx="6" fill="#1e1a3f" stroke="#33CCCC" stroke-width="1.2"/>
          <rect x="438" y="168" width="20" height="14" rx="2" fill="rgba(51,204,204,.15)"/>
          <circle cx="460" cy="175" r="5" fill="none" stroke="#33CCCC" stroke-width="1.2"/>
          <circle cx="460" cy="175" r="2" fill="#33CCCC"/>
          <rect x="469" y="173" width="6" height="4" rx="1" fill="#33CCCC" opacity=".7"/>
        </g>

        <!-- Signal lines TL→hub -->
        <line x1="103" y1="68" x2="243" y2="102" stroke="#33CCCC" stroke-width="1" opacity=".35" class="s1-line"/>
        <!-- TR→hub -->
        <line x1="429" y1="68" x2="292" y2="102" stroke="#6666CC" stroke-width="1" opacity=".35" class="s1-line" style="animation-delay:.4s"/>
        <!-- BL→hub -->
        <line x1="103" y1="162" x2="243" y2="128" stroke="#663399" stroke-width="1" opacity=".35" class="s1-line" style="animation-delay:.8s"/>
        <!-- BR→hub -->
        <line x1="429" y1="162" x2="292" y2="128" stroke="#33CCCC" stroke-width="1" opacity=".35" class="s1-line" style="animation-delay:1.2s"/>

        <!-- Traveling signal dots -->
        <circle r="4" fill="#33CCCC" filter="url(#glow)" class="s1-signal">
          <animateMotion dur="1.6s" repeatCount="indefinite" path="M103,68 L243,102"/>
        </circle>
        <circle r="4" fill="#6666CC" filter="url(#glow)" class="s1-signal">
          <animateMotion dur="1.6s" repeatCount="indefinite" begin="0.5s" path="M429,68 L292,102"/>
        </circle>
        <circle r="4" fill="#663399" filter="url(#glow)" class="s1-signal">
          <animateMotion dur="1.6s" repeatCount="indefinite" begin="1s" path="M103,162 L243,128"/>
        </circle>
        <circle r="3.5" fill="#33CCCC" filter="url(#glow)" class="s1-signal">
          <animateMotion dur="1.6s" repeatCount="indefinite" begin="1.3s" path="M429,162 L292,128"/>
        </circle>

        <!-- Labels -->
        <text x="80" y="36" text-anchor="middle" fill="rgba(51,204,204,.6)" font-family="Poppins" font-size="9" font-weight="600">CAM 01</text>
        <text x="452" y="36" text-anchor="middle" fill="rgba(102,102,204,.6)" font-family="Poppins" font-size="9" font-weight="600">CAM 02</text>
        <text x="80" y="200" text-anchor="middle" fill="rgba(102,51,153,.6)" font-family="Poppins" font-size="9" font-weight="600">SENSOR</text>
        <text x="452" y="200" text-anchor="middle" fill="rgba(51,204,204,.6)" font-family="Poppins" font-size="9" font-weight="600">EDGE</text>
        <text x="266" y="158" text-anchor="middle" fill="rgba(51,204,204,.5)" font-family="Poppins" font-size="8" font-weight="600" letter-spacing="1">CONNECTED</text>
      </svg></div>
      <div class="vscene" id="vs1"><svg viewBox="0 0 532 230" fill="none" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="c2bg" x1="0" y1="0" x2="532" y2="230" gradientUnits="userSpaceOnUse">
            <stop stop-color="#0d0b22"/><stop offset="1" stop-color="#1a1040"/>
          </linearGradient>
          <clipPath id="scanClip"><rect width="532" height="230"/></clipPath>
        </defs>
        <rect width="532" height="230" fill="url(#c2bg)"/>

        <!-- 6 camera feed tiles -->
        <!-- Row 1 -->
        <!-- Feed 1: FORKLIFT — speed + track mini chart -->
        <rect x="14" y="14" width="155" height="92" rx="8" fill="#1a1636" stroke="rgba(51,204,204,.3)" stroke-width="1"/>
        <!-- mini grid -->
        <line x1="14"  y1="80" x2="169" y2="80" stroke="rgba(255,255,255,.06)" stroke-width="1"/>
        <line x1="14"  y1="55" x2="169" y2="55" stroke="rgba(255,255,255,.04)" stroke-width="1"/>
        <line x1="65"  y1="14" x2="65"  y2="106" stroke="rgba(255,255,255,.04)" stroke-width="1"/>
        <line x1="118" y1="14" x2="118" y2="106" stroke="rgba(255,255,255,.04)" stroke-width="1"/>
        <!-- speed line -->
        <polyline points="22,78 50,72 72,60 95,58 118,52 145,48 162,44"
          stroke="#33CCCC" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
        <!-- fill area -->
        <polygon points="22,78 50,72 72,60 95,58 118,52 145,48 162,44 162,80 22,80"
          fill="rgba(51,204,204,.1)"/>
        <!-- dot at head -->
        <circle cx="162" cy="44" r="4" fill="#33CCCC" filter="url(#glow2)"/>
        <!-- label -->
        <rect x="22" y="19" width="46" height="12" rx="2" fill="#33CCCC"/>
        <text x="45" y="28" text-anchor="middle" fill="#0d0b22" font-family="Poppins" font-size="7" font-weight="700">FORKLIFT</text>
        <!-- speed readout -->
        <text x="155" y="28" text-anchor="end" fill="rgba(51,204,204,.7)" font-family="Poppins" font-size="8" font-weight="600">12 km/h</text>

        <!-- Feed 2: PEDESTRIAN — proximity bar -->
        <rect x="187" y="14" width="155" height="92" rx="8" fill="#1a1636" stroke="rgba(102,102,204,.3)" stroke-width="1"/>
        <!-- label -->
        <rect x="195" y="19" width="56" height="12" rx="2" fill="#6666CC"/>
        <text x="223" y="28" text-anchor="middle" fill="white" font-family="Poppins" font-size="7" font-weight="700">PEDESTRIAN</text>
        <!-- proximity meter label -->
        <text x="265" y="52" text-anchor="middle" fill="rgba(255,255,255,.35)" font-family="Poppins" font-size="7">PROXIMITY TO VEHICLE</text>
        <!-- bar track -->
        <rect x="200" y="58" width="128" height="8" rx="4" fill="rgba(102,102,204,.15)"/>
        <!-- bar fill — animates to show closing distance -->
        <rect x="200" y="58" width="108" height="8" rx="4" fill="#6666CC" opacity=".8">
          <animate attributeName="width" values="30;108;30" dur="2.5s" repeatCount="indefinite"/>
        </rect>
        <!-- distance readout -->
        <text x="265" y="80" text-anchor="middle" fill="rgba(255,100,100,.85)" font-family="Poppins" font-size="9" font-weight="700">4.2 m</text>
        <text x="265" y="92" text-anchor="middle" fill="rgba(255,255,255,.3)" font-family="Poppins" font-size="7">↓ closing fast</text>

        <rect x="360" y="14" width="158" height="92" rx="8" fill="#1a1636" stroke="rgba(102,51,153,.3)" stroke-width="1"/>
        <rect x="360" y="14" width="158" height="92" rx="8" fill="rgba(102,51,153,.04)"/>
        <rect x="380" y="42" width="110" height="48" rx="3" fill="rgba(255,255,255,.04)" stroke="rgba(255,255,255,.08)" stroke-width="1"/>
        <!-- red zone polygon -->
        <polygon points="385,85 430,50 490,85" fill="rgba(102,51,153,.15)" stroke="#663399" stroke-width="1.5" stroke-dasharray="4 2" opacity=".9">
          <animate attributeName="opacity" values=".5;1;.5" dur="1.8s" begin=".7s" repeatCount="indefinite"/>
        </polygon>
        <rect x="380" y="33" width="52" height="12" rx="2" fill="#663399"/>
        <text x="406" y="42" text-anchor="middle" fill="white" font-family="Poppins" font-size="7" font-weight="700">RED ZONE</text>

        <!-- Row 2 -->
        <rect x="14" y="120" width="155" height="92" rx="8" fill="#1a1636" stroke="rgba(51,204,204,.2)" stroke-width="1"/>
        <rect x="14" y="120" width="155" height="92" rx="8" fill="rgba(51,204,204,.03)"/>
        <text x="91" y="171" text-anchor="middle" fill="rgba(51,204,204,.2)" font-family="Poppins" font-size="22" font-weight="700">↑↓</text>
        <text x="91" y="192" text-anchor="middle" fill="rgba(51,204,204,.35)" font-family="Poppins" font-size="8" font-weight="600">THROUGHPUT</text>

        <rect x="187" y="120" width="155" height="92" rx="8" fill="#1a1636" stroke="rgba(102,102,204,.2)" stroke-width="1"/>
        <!-- processing indicator -->
        <circle cx="264" cy="166" r="25" fill="none" stroke="rgba(102,102,204,.2)" stroke-width="1"/>
        <circle cx="264" cy="166" r="25" fill="none" stroke="#6666CC" stroke-width="2" stroke-dasharray="40 118" stroke-linecap="round">
          <animateTransform attributeName="transform" type="rotate" from="0 264 166" to="360 264 166" dur="1.8s" repeatCount="indefinite"/>
        </circle>
        <text x="264" y="170" text-anchor="middle" fill="#6666CC" font-family="Poppins" font-size="9" font-weight="700">AI</text>

        <rect x="360" y="120" width="158" height="92" rx="8" fill="#1a1636" stroke="rgba(102,51,153,.2)" stroke-width="1"/>
        <rect x="375" y="135" width="128" height="8" rx="4" fill="rgba(102,51,153,.15)"/>
        <rect x="375" y="135" width="96" height="8" rx="4" fill="#663399" opacity=".7">
          <animate attributeName="width" values="20;96;20" dur="3s" repeatCount="indefinite"/>
        </rect>
        <rect x="375" y="151" width="128" height="8" rx="4" fill="rgba(102,51,153,.15)"/>
        <rect x="375" y="151" width="60" height="8" rx="4" fill="#663399" opacity=".5">
          <animate attributeName="width" values="80;40;80" dur="2.5s" repeatCount="indefinite"/>
        </rect>
        <rect x="375" y="167" width="128" height="8" rx="4" fill="rgba(102,51,153,.15)"/>
        <rect x="375" y="167" width="110" height="8" rx="4" fill="#663399" opacity=".6">
          <animate attributeName="width" values="50;110;50" dur="3.5s" repeatCount="indefinite"/>
        </rect>
        <text x="439" y="200" text-anchor="middle" fill="rgba(102,51,153,.4)" font-family="Poppins" font-size="8" font-weight="600">PROCESSING</text>

        <!-- Full-width scan line -->
        <g clip-path="url(#scanClip)">
          <rect x="0" width="532" height="2" fill="url(#scanGrad)" class="s2-scan" opacity=".5"/>
        </g>
        <defs>
          <linearGradient id="scanGrad" x1="0" y1="0" x2="532" y2="0" gradientUnits="userSpaceOnUse">
            <stop stop-color="transparent"/><stop offset=".5" stop-color="#33CCCC"/><stop stop-color="transparent"/>
          </linearGradient>
        </defs>
      </svg></div>
      <div class="vscene" id="vs2"><svg viewBox="0 0 532 230" fill="none" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="c3bg" x1="0" y1="0" x2="532" y2="230" gradientUnits="userSpaceOnUse">
            <stop stop-color="#0a1020"/><stop offset="1" stop-color="#0f0e24"/>
          </linearGradient>
          <filter id="glow3"><feGaussianBlur stdDeviation="3" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
        </defs>
        <rect width="532" height="230" fill="url(#c3bg)"/>

        <!-- grid -->
        <line x1="60"  y1="20"  x2="60"  y2="220" stroke="rgba(255,255,255,.04)" stroke-width="1"/>
        <line x1="160" y1="20"  x2="160" y2="220" stroke="rgba(255,255,255,.04)" stroke-width="1"/>
        <line x1="266" y1="20"  x2="266" y2="220" stroke="rgba(255,255,255,.04)" stroke-width="1"/>
        <line x1="372" y1="20"  x2="372" y2="220" stroke="rgba(255,255,255,.04)" stroke-width="1"/>
        <line x1="472" y1="20"  x2="472" y2="220" stroke="rgba(255,255,255,.04)" stroke-width="1"/>
        <line x1="20"  y1="60"  x2="512" y2="60"  stroke="rgba(255,255,255,.04)" stroke-width="1"/>
        <line x1="20"  y1="115" x2="512" y2="115" stroke="rgba(255,255,255,.04)" stroke-width="1"/>
        <line x1="20"  y1="170" x2="512" y2="170" stroke="rgba(255,255,255,.04)" stroke-width="1"/>

        <!-- ZONE labels (top axis) -->
        <text x="110"  y="14" text-anchor="middle" fill="rgba(255,255,255,.18)" font-family="Poppins" font-size="8" letter-spacing="1">ZONE A</text>
        <text x="213"  y="14" text-anchor="middle" fill="rgba(255,255,255,.18)" font-family="Poppins" font-size="8" letter-spacing="1">ZONE B</text>
        <text x="319"  y="14" text-anchor="middle" fill="rgba(255,255,255,.18)" font-family="Poppins" font-size="8" letter-spacing="1">ZONE C</text>
        <text x="422"  y="14" text-anchor="middle" fill="rgba(255,255,255,.18)" font-family="Poppins" font-size="8" letter-spacing="1">ZONE D</text>

        <!-- FORKLIFT TRACK — dashed path with arrow, teal -->
        <path d="M50,190 L50,80 L280,80" stroke="#33CCCC" stroke-width="2" stroke-dasharray="8 4" fill="none" stroke-linecap="round"/>
        <!-- arrowhead -->
        <polygon points="280,74 294,80 280,86" fill="#33CCCC"/>
        <!-- speed badge -->
        <rect x="52" y="92" width="52" height="16" rx="4" fill="rgba(51,204,204,.15)" stroke="#33CCCC" stroke-width="1"/>
        <text x="78" y="103" text-anchor="middle" fill="#33CCCC" font-family="Poppins" font-size="8" font-weight="700">12 km/h</text>
        <!-- FORKLIFT dot -->
        <circle cx="180" cy="80" r="10" fill="#33CCCC" filter="url(#glow3)"/>
        <circle cx="180" cy="80" r="5"  fill="#0a1828"/>
        <!-- forklift label -->
        <rect x="148" y="56" width="50" height="16" rx="4" fill="#33CCCC"/>
        <text x="173" y="67" text-anchor="middle" fill="#0a1020" font-family="Poppins" font-size="8" font-weight="700">FORKLIFT</text>

        <!-- PEDESTRIAN TRACK — dashed path with arrow, white/gray -->
        <path d="M360,190 L360,110" stroke="rgba(255,255,255,.5)" stroke-width="2" stroke-dasharray="6 4" fill="none" stroke-linecap="round"/>
        <!-- arrowhead -->
        <polygon points="354,110 360,96 366,110" fill="rgba(255,255,255,.5)"/>
        <!-- PEDESTRIAN dot -->
        <circle cx="360" cy="150" r="10" fill="#ff5555" filter="url(#glow3)"/>
        <circle cx="360" cy="150" r="5"  fill="#200808"/>
        <!-- ped label -->
        <rect x="320" y="128" width="80" height="16" rx="4" fill="#ff5555"/>
        <text x="360" y="139" text-anchor="middle" fill="white" font-family="Poppins" font-size="8" font-weight="700">PEDESTRIAN</text>

        <!-- COLLISION PREDICTION ZONE — sits in top half, clear of risk card -->
        <rect x="160" y="55" width="200" height="70" rx="6" fill="rgba(255,60,60,.07)" stroke="rgba(255,60,60,.45)" stroke-width="1.5" stroke-dasharray="6 3">
          <animate attributeName="opacity" values=".5;1;.5" dur="1.6s" repeatCount="indefinite"/>
        </rect>
        <!-- zone label — top of box, not overlapping card -->
        <text x="260" y="50" text-anchor="middle" fill="rgba(255,80,80,.8)" font-family="Poppins" font-size="8" font-weight="600" letter-spacing="1">CONFLICT ZONE</text>

        <!-- PROJECTED INTERSECTION dot with pulse -->
        <circle cx="294" cy="80" r="8" fill="rgba(255,80,80,.25)">
          <animate attributeName="r" values="8;16;8" dur="1.2s" repeatCount="indefinite"/>
          <animate attributeName="opacity" values=".5;0;.5" dur="1.2s" repeatCount="indefinite"/>
        </circle>
        <circle cx="294" cy="80" r="7" fill="#ff4444" filter="url(#glow3)"/>

        <!-- RISK ALERT CARD -->
        <rect x="300" y="140" width="210" height="72" rx="10" fill="rgba(15,12,35,.95)" stroke="rgba(255,80,80,.5)" stroke-width="1.5"/>
        <text x="314" y="160" fill="#ff6060" font-family="Poppins" font-size="9" font-weight="700">⚠ Risk Alert</text>
        <text x="314" y="174" fill="rgba(255,255,255,.7)" font-family="Poppins" font-size="8">High Risk: Fast Vehicle + Pedestrian</text>
        <!-- confidence bar -->
        <rect x="314" y="184" width="182" height="5" rx="2.5" fill="rgba(255,255,255,.1)"/>
        <rect x="314" y="184" width="154" height="5" rx="2.5" fill="#33CCCC">
          <animate attributeName="width" from="0" to="154" dur="1s" fill="freeze"/>
        </rect>
        <text x="500" y="202" fill="rgba(255,255,255,.5)" font-family="Poppins" font-size="8">94%</text>
        <!-- ETA -->
        <text x="314" y="202" fill="rgba(255,120,80,.9)" font-family="Poppins" font-size="8" font-weight="600">ETA to conflict: 2.3s</text>
      </svg></div>
      <div class="vscene" id="vs3"><svg viewBox="0 0 532 230" fill="none" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="c4bg" x1="0" y1="0" x2="532" y2="230" gradientUnits="userSpaceOnUse">
            <stop stop-color="#0d0b22"/><stop offset="1" stop-color="#1a1040"/>
          </linearGradient>
          <filter id="glow4"><feGaussianBlur stdDeviation="3" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
        </defs>
        <rect width="532" height="230" fill="url(#c4bg)"/>

        <!-- Flow: AI → Human → Action -->
        <!-- AI node -->
        <circle cx="90" cy="115" r="38" fill="rgba(102,102,204,.1)" stroke="#6666CC" stroke-width="1.5"/>
        <circle cx="90" cy="115" r="26" fill="#6666CC" opacity=".9"/>
        <text x="90" y="112" text-anchor="middle" fill="white" font-family="Poppins" font-size="11" font-weight="700">AI</text>
        <text x="90" y="125" text-anchor="middle" fill="rgba(255,255,255,.7)" font-family="Poppins" font-size="7">DETECTION</text>
        <text x="90" y="164" text-anchor="middle" fill="rgba(102,102,204,.6)" font-family="Poppins" font-size="9" font-weight="600">Alert Raised</text>

        <!-- Arrow AI→Human -->
        <line x1="130" y1="115" x2="208" y2="115" stroke="rgba(102,102,204,.4)" stroke-width="1.5" stroke-dasharray="5 3" class="s4-line"/>
        <circle r="4" fill="#6666CC" filter="url(#glow4)" opacity=".9">
          <animateMotion dur="1.2s" repeatCount="indefinite" path="M130,115 L208,115"/>
        </circle>
        <!-- Alert bubble -->
        <rect x="138" y="98" width="60" height="18" rx="6" fill="#2a2048" stroke="rgba(102,102,204,.4)" stroke-width="1">
          <animate attributeName="opacity" values=".6;1;.6" dur="1.5s" repeatCount="indefinite"/>
        </rect>
        <text x="168" y="110" text-anchor="middle" fill="rgba(255,100,100,.9)" font-family="Poppins" font-size="8" font-weight="600">⚠ HIGH RISK</text>

        <!-- HUMAN node — matches AI / ACTION circle style -->
        <circle cx="266" cy="115" r="42" fill="rgba(51,204,204,.08)" stroke="#33CCCC" stroke-width="1.5" filter="url(#glow4)"/>
        <circle cx="266" cy="115" r="28" fill="#1a3860" opacity=".95"/>
        <text x="266" y="111" text-anchor="middle" fill="white" font-family="Poppins" font-size="10" font-weight="700">HUMAN</text>
        <text x="266" y="124" text-anchor="middle" fill="rgba(255,255,255,.7)" font-family="Poppins" font-size="7">REVIEW</text>
        <text x="266" y="168" text-anchor="middle" fill="rgba(51,204,204,.6)" font-family="Poppins" font-size="9" font-weight="600">Reviewing…</text>


        <!-- Arrow Human→Action -->
        <line x1="310" y1="115" x2="388" y2="115" stroke="rgba(0,184,148,.4)" stroke-width="1.5" stroke-dasharray="5 3" class="s4-line" style="animation-delay:.6s"/>
        <circle r="4" fill="#00b894" filter="url(#glow4)" opacity=".9">
          <animateMotion dur="1.2s" repeatCount="indefinite" begin="0.6s" path="M310,115 L388,115"/>
        </circle>
        <!-- Validated bubble -->
        <rect x="316" y="98" width="66" height="18" rx="6" fill="#0d2e26" stroke="rgba(0,184,148,.5)" stroke-width="1">
          <animate attributeName="opacity" values=".6;1;.6" dur="1.5s" begin=".4s" repeatCount="indefinite"/>
        </rect>
        <text x="349" y="110" text-anchor="middle" fill="#00b894" font-family="Poppins" font-size="8" font-weight="600">✓ VALIDATED</text>

        <!-- Action node -->
        <circle cx="442" cy="115" r="38" fill="rgba(0,184,148,.1)" stroke="#00b894" stroke-width="1.5"/>
        <circle cx="442" cy="115" r="26" fill="#00b894" opacity=".9"/>
        <text x="442" y="112" text-anchor="middle" fill="white" font-family="Poppins" font-size="9" font-weight="700">ACTION</text>
        <text x="442" y="125" text-anchor="middle" fill="rgba(255,255,255,.7)" font-family="Poppins" font-size="7">DISPATCHED</text>
        <text x="442" y="164" text-anchor="middle" fill="rgba(0,184,148,.6)" font-family="Poppins" font-size="9" font-weight="600">Alert Sent</text>

        <!-- Bottom: false positive reduction stat -->
        <rect x="150" y="178" width="232" height="32" rx="8" fill="rgba(255,255,255,.04)" stroke="rgba(255,255,255,.08)" stroke-width="1"/>
        <text x="266" y="194" text-anchor="middle" fill="rgba(255,255,255,.5)" font-family="Poppins" font-size="9">False positives reduced by </text>
        <text x="390" y="194" fill="#33CCCC" font-family="Poppins" font-size="9" font-weight="700">↓ 80%</text>
      </svg></div>
      <div class="vscene" id="vs4"><svg viewBox="0 0 532 230" fill="none" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="c5bg" x1="0" y1="0" x2="532" y2="230" gradientUnits="userSpaceOnUse">
            <stop stop-color="#0d0b22"/><stop offset="1" stop-color="#1a1040"/>
          </linearGradient>
          <linearGradient id="c5line" x1="60" y1="0" x2="472" y2="0" gradientUnits="userSpaceOnUse">
            <stop stop-color="#33CCCC"/><stop offset=".5" stop-color="#6666CC"/><stop offset="1" stop-color="#663399"/>
          </linearGradient>
          <linearGradient id="c5fill" x1="0" y1="0" x2="0" y2="1">
            <stop stop-color="#33CCCC" stop-opacity=".25"/><stop offset="1" stop-color="#33CCCC" stop-opacity="0"/>
          </linearGradient>
          <filter id="glow5"><feGaussianBlur stdDeviation="3" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
        </defs>
        <rect width="532" height="230" fill="url(#c5bg)"/>

        <!-- Grid lines -->
        <line x1="60" y1="40"  x2="490" y2="40"  stroke="rgba(255,255,255,.05)" stroke-width="1"/>
        <line x1="60" y1="80"  x2="490" y2="80"  stroke="rgba(255,255,255,.05)" stroke-width="1"/>
        <line x1="60" y1="120" x2="490" y2="120" stroke="rgba(255,255,255,.05)" stroke-width="1"/>
        <line x1="60" y1="160" x2="490" y2="160" stroke="rgba(255,255,255,.05)" stroke-width="1"/>
        <line x1="60" y1="40"  x2="60"  y2="175" stroke="rgba(255,255,255,.08)" stroke-width="1"/>

        <!-- Y-axis labels -->
        <text x="50" y="43"  text-anchor="end" fill="rgba(255,255,255,.25)" font-family="Poppins" font-size="9">100%</text>
        <text x="50" y="83"  text-anchor="end" fill="rgba(255,255,255,.25)" font-family="Poppins" font-size="9"> 75%</text>
        <text x="50" y="123" text-anchor="end" fill="rgba(255,255,255,.25)" font-family="Poppins" font-size="9"> 50%</text>
        <text x="50" y="163" text-anchor="end" fill="rgba(255,255,255,.25)" font-family="Poppins" font-size="9"> 25%</text>

        <!-- X-axis labels -->
        <text x="100" y="190" text-anchor="middle" fill="rgba(255,255,255,.2)" font-family="Poppins" font-size="8">W1</text>
        <text x="195" y="190" text-anchor="middle" fill="rgba(255,255,255,.2)" font-family="Poppins" font-size="8">W2</text>
        <text x="290" y="190" text-anchor="middle" fill="rgba(255,255,255,.2)" font-family="Poppins" font-size="8">W3</text>
        <text x="385" y="190" text-anchor="middle" fill="rgba(255,255,255,.2)" font-family="Poppins" font-size="8">W4</text>
        <text x="472" y="190" text-anchor="middle" fill="rgba(255,255,255,.2)" font-family="Poppins" font-size="8">W5</text>

        <!-- Fill area -->
        <path d="M60,158 C120,148 160,130 195,112 C240,88 270,80 290,68 C330,48 400,42 472,38 L472,175 L60,175 Z"
          fill="url(#c5fill)" opacity=".6">
          <animate attributeName="opacity" from="0" to=".6" dur=".8s" fill="freeze"/>
        </path>

        <!-- Main trend line (draws in) -->
        <path d="M60,158 C120,148 160,130 195,112 C240,88 270,80 290,68 C330,48 400,42 472,38"
          stroke="url(#c5line)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"
          class="s5-line"/>

        <!-- Data points -->
        <g class="s5-dot"><circle cx="60"  cy="158" r="5" fill="#33CCCC" filter="url(#glow5)"/></g>
        <g class="s5-dot"><circle cx="195" cy="112" r="5" fill="#5599dd" filter="url(#glow5)"/></g>
        <g class="s5-dot"><circle cx="290" cy="68"  r="5" fill="#6666CC" filter="url(#glow5)"/></g>
        <g class="s5-dot"><circle cx="472" cy="38"  r="6" fill="#663399" filter="url(#glow5)"/></g>

        <!-- Metric cards -->
        <g class="s5-label">
          <rect x="330" y="100" width="155" height="60" rx="10" fill="rgba(255,255,255,.05)" stroke="rgba(255,255,255,.08)" stroke-width="1"/>
          <text x="345" y="120" fill="rgba(255,255,255,.5)" font-family="Poppins" font-size="8">Accuracy</text>
          <text x="345" y="136" fill="#33CCCC" font-family="Poppins" font-size="16" font-weight="700">97.4%</text>
          <text x="345" y="152" fill="rgba(0,184,148,.8)" font-family="Poppins" font-size="8" font-weight="600">↑ +12% this month</text>
        </g>

        <!-- "Always Advancing" label -->
        <text x="266" y="210" text-anchor="middle" fill="rgba(102,51,153,.5)" font-family="Poppins" font-size="9" font-weight="600" letter-spacing="2">ALWAYS ADVANCING</text>
      </svg></div>
    </div>

  </div>

</section>

<script>
const stageIcons = [
  `<circle cx="12" cy="14" r="2" fill="white"/>
   <path d="M8.5,10.5 Q12,7 15.5,10.5" stroke="white" stroke-width="1.8" fill="none" stroke-linecap="round"/>
   <path d="M5.5,7.5 Q12,1 18.5,7.5" stroke="white" stroke-width="1.8" fill="none" stroke-linecap="round"/>
   <line x1="12" y1="16" x2="12" y2="20" stroke="white" stroke-width="1.8" stroke-linecap="round"/>
   <line x1="9" y1="20" x2="15" y2="20" stroke="white" stroke-width="1.8" stroke-linecap="round"/>`,
  `<circle cx="10" cy="10" r="6" stroke="white" stroke-width="1.8" fill="none"/>
   <line x1="7" y1="10" x2="13" y2="10" stroke="white" stroke-width="1.2" opacity=".6"/>
   <line x1="10" y1="7" x2="10" y2="13" stroke="white" stroke-width="1.2" opacity=".6"/>
   <line x1="14.5" y1="14.5" x2="20" y2="20" stroke="white" stroke-width="2.2" stroke-linecap="round"/>`,
  `<circle cx="12" cy="12" r="8" stroke="white" stroke-width="1.8" fill="none"/>
   <circle cx="12" cy="12" r="3.5" stroke="white" stroke-width="1.5" fill="none"/>
   <line x1="12" y1="2" x2="12" y2="6" stroke="white" stroke-width="1.8" stroke-linecap="round"/>
   <line x1="12" y1="18" x2="12" y2="22" stroke="white" stroke-width="1.8" stroke-linecap="round"/>
   <line x1="2" y1="12" x2="6" y2="12" stroke="white" stroke-width="1.8" stroke-linecap="round"/>
   <line x1="18" y1="12" x2="22" y2="12" stroke="white" stroke-width="1.8" stroke-linecap="round"/>`,
  `<path d="M12,2 L20,5 L20,11 Q20,17 12,22 Q4,17 4,11 L4,5 Z" stroke="white" stroke-width="1.8" fill="none"/>
   <path d="M8,12 L11,15 L16,9" stroke="white" stroke-width="2.2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>`,
  `<polyline points="3,17 7,12 11,14 15,8 21,4" stroke="white" stroke-width="1.8" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
   <polyline points="17,4 21,4 21,8" stroke="white" stroke-width="1.8" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
   <line x1="3" y1="20" x2="21" y2="20" stroke="white" stroke-width="1.5" stroke-linecap="round" opacity=".5"/>`,
];

const stages = [
  { name:'Connect',  sub:'Integrates with existing cameras & edge devices',        val:false },
  { name:'Analyze',  sub:'AI models process every feed simultaneously',             val:false },
  { name:'Detect',   sub:'Identifies PPE violations, unsafe zones & bottlenecks',   val:false },
  { name:'Validate', sub:'Human-in-the-loop review for trusted, noise-free alerts', val:true  },
  { name:'Optimize', sub:'Continuously improves with every detection cycle',         val:false },
];

let current = 0;

function show(i) {
  if (i === current && document.querySelector('.vscene.show')) return;
  current = i;

  // Update scenes
  document.querySelectorAll('.vscene').forEach((el, idx) => {
    el.classList.toggle('show', idx === i);
    // Re-trigger SVG animations by cloning
    if (idx === i) {
      const svg = el.querySelector('svg');
      if (svg) {
        const clone = svg.cloneNode(true);
        svg.parentNode.replaceChild(clone, svg);
      }
    }
  });

  // Update pips
  document.querySelectorAll('.prog-pip').forEach((el, idx) => {
    el.className = 'prog-pip';
    if (idx < i)       el.classList.add('done');
    else if (idx === i) el.classList.add('active');
  });

  // Update steps highlight
  document.querySelectorAll('.step').forEach((el, idx) => {
    el.classList.toggle('active', idx === i);
  });

  // Update label
  const s = stages[i];
  document.getElementById('sIcon').innerHTML = stageIcons[i];
  document.getElementById('sName').textContent = s.name;
  document.getElementById('sSub').textContent  = s.sub;
  document.getElementById('vBadge').classList.toggle('show', s.val);
}

// ── Intersection Observer: swap scene when step crosses the middle of viewport ──
const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      const i = parseInt(entry.target.dataset.step);
      show(i);
    }
  });
}, {
  threshold: 0.5,  // fire when 50% of the step is visible
  rootMargin: '-10% 0px -40% 0px'  // biased toward top half of viewport
});

document.querySelectorAll('.step').forEach(el => observer.observe(el));

// ── Click step ──
document.querySelectorAll('.step').forEach(el => {
  el.addEventListener('click', () => {
    el.scrollIntoView({ behavior:'smooth', block:'center' });
  });
});

// Init
show(0);
</script>
</body>
</html>
